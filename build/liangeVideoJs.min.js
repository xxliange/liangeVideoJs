!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).liangeVideoJs=n()}(this,function(){"use strict";function r(t){var n,i=document.querySelectorAll(t);return(n=i)&&(n instanceof HTMLCollection||n instanceof NodeList)?i:[i]}function c(t){if(t){if(t instanceof c)return t;var n,i,e=(this.selector=t).nodeType,o=[];9===e||1===e?o=[t]:"string"==typeof t&&(o=0===(t=t.replace("/\n/mg","").trim()).indexOf("<")?(n=t,i=void 0,(i=document.createElement("div")).innerHTML=n,i.children):r(t));var s=o.length;if(!s)return this;for(var l=0;l<s;l++)this[l]=o[l];this.length=s}}function l(t){return new c(t)}function i(t){this.video=t}function t(t){this.video=t}function n(t){this.video=t,this.$elem=l("\n        <div class='l-c-playCon'>\n\n        </div>\n    "),this.$font=l("\n        <i class='iconfont icon-play-circle' />\n    "),this.$elem.append(this.$font),this.isPlay=!1,this.type="click",t.$playFont=this.$font}function e(t){this.video=t,this.$elem=l("\n        <div class='l-c-video'>\n            <i class='iconfont icon-sound' />\n        </div>\n    ")}function o(t){this.video=t,this.$durationTime=l("\n        <p> 0:00 </p>\n    "),this.$playTime=l("\n        <p> 0:00 </p>\n    "),this.$line=l("<p> / </p>"),this.$elem=l("\n        <div class='l-c-timeText'></div>\n    "),this.$elem.append(this.$playTime).append(this.$line).append(this.$durationTime),t.$durationTime=this.$durationTime,t.$playTime=this.$playTime}function s(t){this.video=t,this.$elem=l("\n        <div class='l-c-loop'>\n            <i class='iconfont icon-repeat' />\n        </div>\n    ")}function a(t){this.video=t,this.$elem=l("\n        <div class='l-c-speed'> x1 </div> \n    ")}function u(t){this.video=t,this.$elem=l("\n        <div class='l-g-fullScreen'>\n        </div>\n    "),this.$font=l("\n        <i class='iconfont icon-fullscreen' />\n    "),this.$elem.append(this.$font),this.isFull=!1,this.type="click",t.$fullFont=this.$font}function d(t){this.video=t,this.$elem=l("\n        <div class='l-c-progressBar'></div>\n    ")}c.prototype={forEach:function(t){for(var n=0;n<this.length;n++){var i=this[n];if(!1===t.call(i,i,n))break}return this},on:function(t,i,e){e||(e=i,i=null);var o=[];return o=t.split(/\s+/),this.forEach(function(n){o.forEach(function(t){t&&(i?n.addEventListener(t,function(t){var n=t.target;n.matches(i)&&e.call(n,t)}):n.addEventListener(t,e))})})},children:function(){var t=this[0];return t?l(t.children):null},get:function(t){var n=this.length;return n<=t&&(t%=n),l(this[t])},addClass:function(i){return i?this.forEach(function(t){var n=void 0;t.className?((n=(n=t.className.split(/\s/)).filter(function(t){return!!t.trim()})).indexOf(i)<0&&n.push(i),t.className=n.join(" ")):t.className=i}):this},removeClass:function(e){return e?this.forEach(function(t){var n=void 0,i=void 0;for(n=t.className.split(/\s/),i=0;i<n.length;i+=1){n[i]===e&&n.splice(i,1)}t.className=n.join(" ")}):this},css:function(e,t){var o=e+":"+t;return this.forEach(function(t){var n=(t.getAttribute("style")||"").trim(),i=[];n?(n.split(";").forEach(function(t){var n=t.split(":").map(function(t){return t.trim()});2===n.length&&i.push(n[0]+":"+n[1])}),(i=i.map(function(t){return 0===t.indexOf(e)?o:t})).indexOf(o)<0&&i.push(o),t.setAttribute("style",i.join("; "))):t.setAttribute("style",o)})},append:function(t){return this.forEach(function(n){t.forEach(function(t){n.appendChild(t)})})},innerText:function(n){return this.forEach(function(t){n&&(t.innerText=n)})},getVideoEvent:function(){var n=null;return this.forEach(function(t){null!==t&&(n=t)}),n},play:function(){return this.forEach(function(t){t.play()})},pause:function(){return this.forEach(function(t){t.pause()})}},i.prototype={play:function(){var t=this.video,n=t.$videoElm,i=t.isPlay,e=t.$playFont;i=i?(n.pause(),e.removeClass("icon-timeout"),e.addClass("icon-play-circle"),!1):(e.removeClass("icon-play-circle"),e.addClass("icon-timeout"),n.play(),!0),video.isPlay=i},fullScreen:function(){var t=this.video,n=t.$selector,i=t.isFull,e=t.$fullFont;this._requestFullScreen(n.get(0)[0],i),i=i?(e.addClass("icon-fullscreen"),e.removeClass("icon-fullscreen-exit"),!1):(e.addClass("icon-fullscreen-exit"),e.removeClass("icon-fullscreen"),!0),t.isFull=i},_requestFullScreen:function(t,n){var i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;i&&(n?document.exitFullscreen():i.call(t))}},t.prototype={_init:function(){var i=this,e=this.video,t=e.$videoElm;this.$event=t.getVideoEvent(),t.on("loadedmetadata",function(){var t=i.$event.duration,n=i._time2minute(t);e.$durationTime.innerText(n)}),t.on("play",function(){i.playTime=setInterval(function(){e.$playTime.innerText(i._time2minute(i.$event.currentTime))},1e3)}),t.on("ended",function(){console.log("end")}),e.playTime=this.playTime},_time2minute:function(t){var n=parseInt(t%60);return n<10&&(n="0"+n),parseInt(t/60)+":"+n}},n.prototype={constructor:n,onClick:function(){this.video.E.play()}},e.prototype={constructor:e},o.prototype={constructor:o},s.prototype={constructor:s},a.prototype={constructor:a},u.prototype={constructor:u,onClick:function(){video.E.fullScreen()}},d.prototype={constructor:d};var f={};function h(t,n){var i=void 0;for(i in t)if(t.hasOwnProperty(i)&&!1===n.call(t,i,t[i]))break}function p(t){this.video=t,this.controls={}}f.playCon=n,f.voice=e,f.timeText=o,f.loop=s,f.speed=a,f.fullScreen=u,f.progressBar=d,p.prototype={constructor:p,init:function(){var i=this,e=this.video;((e.config||{}).controls||[]).forEach(function(t){var n=f[t];"function"==typeof n&&n&&(i.controls[t]=new n(e))}),this._addToControlBar(),this._bindEvent()},_addToControlBar:function(){var t=this.video.$controlsBar,n=this.controls,e=l("<div></div>"),o=l("<div></div>");t.append(o),t.append(e),o.addClass("l-c-controlsProgress"),e.addClass("l-c-controlsMain"),h(n,function(t,n){var i=n.$elem;i&&o.append(i),"progressBar"===t||e.append(i)})},_bindEvent:function(){var t=this.controls;this.video;h(t,function(t,n){var i=n.type;if(i){var e=n.$elem;"click"===i&&n.onClick&&e.on("click",function(t){n.onClick(t)})}})}};var v={width:null,height:null,controls:["progressBar","playCon","voice","timeText","loop","speed","fullScreen"],url:null,title:null},m=1;function y(t,n){if(null==t)throw new Error("错误: 初始化video时未传入参数!");this.id="liangeVideo-"+m++,this.E=new i(this),this.selector=t,this.config=n,this.$selector=l(t)}y.prototype={_initConfig:function(){var t=this.$selector;this.config=Object.assign({},v,this.config);var n=this.config,i=n.width,e=n.height;null!==i?i<=350&&(i=350):i=700,null!==e?e<=200&&(e=200):e=480,t.css("width",i+"px").css("height",e+"px")},_initDom:function(){var n=this,t=this.$selector,i=this.config,e=void 0,o=void 0,s=void 0;e=l("<div></div>"),o=l("<video src="+i.url+"></video>"),null!==i.title&&(s=l("<div>\n                <p>"+i.title+"</p>\n            </div>"),t.append(s),s.addClass("l-title"),this.$titleElm=s),t.append(e).append(o),e.addClass("l-c-controlsBar"),o.addClass("l-video"),this.$controlsBar=e,this.$videoElm=o,this.$selector=t,o.on("click",function(){n.E.play()}),o.on("dblclick",function(){n.E.fullScreen()}),window.addEventListener("keydown",function(t){32===t.keyCode&&n.E.play()})},_initVideo:function(){this.videoEl=new t(this),this.videoEl._init()},_initControls:function(){this.controls=new p(this),this.controls.init()},create:function(){this._initConfig(),this._initDom(),this._initVideo(),this._initControls()}};try{document}catch(t){throw new Error("请在浏览器环境下运行")}return window.liangeVideoJs||y});
//# sourceMappingURL=liangeVideoJs.min.js.map
